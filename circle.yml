machine:
  environment:
    PATH: "${PATH}:${HOME}/${CIRCLE_PROJECT_REPONAME}/node_modules/.bin"
  ruby:
    version: 2.3.1

dependencies:
  override:
    - yarn setup
  cache_directories:
    - ~/.cache/yarn

test:
  override:
    - yarn build
  post:
    - bundle exec htmlproofer ./_site --only-4xx --allow-hash-href --assume-extension --check-opengraph --url-ignore "feed.xml" --url-ignore "/\.\//"
    # - bundle exec htmlproofer ./_site --only-4xx --allow-hash-href --assume-extension --check-opengraph --url-ignore "feed.xml" --check-img-http --url-ignore "/\.\//" --check-html --report-invalid-tags --report-missing-names --report-missing-doctype
    # wait for https://github.com/gjtorikian/html-proofer/pull/362 to me merged
